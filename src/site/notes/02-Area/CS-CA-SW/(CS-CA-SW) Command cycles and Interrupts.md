---
{"dg-publish":true,"permalink":"/02-Area/CS-CA-SW/(CS-CA-SW) Command cycles and Interrupts/","tags":["Area/CS-CA-SW"],"noteIcon":"","created":"2025-01-05T15:55:09.000+09:00","updated":"2025-04-07T22:55:07.008+09:00"}
---

# Command cycles and Interrupts

## 명령어 사이클과 인터럽트

### 명령어 사이클

명령어 사이클 (`command cycle`)이란 명령어가 실행되는 흐름, 실행되는 주기를 말합니다.

명령어 사이클은 명령어를 CPU 로부터 가져오는 인출 사이클(`fetch cycle`), 명령어를 실행하는 단계인 실행 사이클(`execution cycle`)로 이루어집니다.
두 단계가 계속해서 반복되는 방식입니다.

그 사이에 명령어 실행에 필요한 값을 메모리에서 가져와야 할 수 있습니다. 이 때 일어나는 메모리 접근을 간접 사이클(`indirect cycle`)이라고 합니다.

### 인터럽트

CPU의 작업을 방해하는 신호를 인터럽트(`interrupt`)라고 합니다.

인터럽트는 크게 두 가지의 종류, 동기 인터럽트와 비동기 인터럽트로 나뉩니다.

- 동기 인터럽트 (`synchronous interrupt`)
 CPU에 의해 발생하는 인터럽트입니다. 프로그램을 실행하며 맞닥뜨린 오류는 모두 여기에 속합니다. 동기 인터럽트는 예외(`exception`)으로 더 자주 불립니다.
- 비동기 인터럽트 (`asynchronous interrupt`)
    
    주로 입출력장치에 의해 발생하는 인터럽트입니다. 주로 하드웨어 인터럽트(`hardware interrupt`)라고 불립니다. 
    

### 하드웨어 인터럽트

하드웨어 인터럽트는 입출력 작업 도중에도 효율적으로 명령어를 처리하기 위해 하드웨어 인터럽트를 사용합니다. CPU는 하드웨어 인터럽트를 사용함으로써 입출력장치의 완료 여부를 기다릴 필요 없이 다른 작업을 처리할 수 있게 됩니다. 

하드웨어 인터럽트의 처리 순서는 다음과 같습니다. CPU의 종류에 따라 다를 수 있지만, 대동소이합니다.

1. 입출력 장치는 CPU에게 인터럽트 요청 신호를 보냅니다. 
    
    인터럽트 요청 신호란 입출력장치가 CPU에게 인터럽트 가능 여부를 물어보는 신호입니다.
    
2.  CPU는 실행 사이클이 끝나고 명령어를 인출하기 전 항상 인터럽트 여부를 확인합니다. 
3. CPU는 인터럽트 요청을 확인하고 인터럽트 플래그를 통해 현재 인터럽트 가능 여부를 판단합니다.
    
    인터럽트 플래그(`interrupt flag`)란 플래그 레지스터에 기록되어 있는 인터럽트 가능 여부를 알리는 플래그로, 이것이 활성화 되어야 인터럽트를 처리할 수 있습니다.
    
4. 가능하다면 CPU가 현재까지의 작업을 백업합니다.
5. CPU는 인터럽트 벡터를 참조하여 인터럽트 서비스 루틴을 실행합니다.
    
    인터럽트 서비스 루틴(`interrupt service routine`)이란 인터럽트를 처리하기 위한 프로그램입니다. 다른 말로 인터럽트 핸들러(`interrupt handler`)라고도 합니다.
    
    인터럽트에 대해서 어떤 방식으로 처리할 것인지에 대한 정보가 담겨 있습니다.
    
    인터럽트 벡터(`interrupt vector`)란 각기 다른 인터럽트 서비스 루틴을 구별하기 위한 정보입니다. 
    
    인터럽트 벡터의 값은 프로그램 카운터의 값이 백업된 후 프로그램 카운터로 이동합니다. 
    
6. 인터럽트 서비스 루틴이 끝나면 백업해둔 작업을 복구해 다시 진행합니다.

<aside>
💡 예외의 종류는 다음과 같습니다. 예외의 종류는 다음으로 실행되는 명령어의 위치에 따라 나뉩니다.

폴트(`fault`)는 예외를 처리한 후 예외가 발생한 명령어부터 다시 실행하는 예외입니다.

트랩(`trap`)은 예외를 처리한 후 예외 다음 명령어부터 실행하는 예외입니다.

중단(`abort`)은 CPU가 프로그램을 강제로 중단할 수 밖에 없는 오류를 발견했을 때 발생하는 예외입니다.

소프트웨어 인터럽트(`software interrupt`)는 시스템 호출이 발생한 경우의 예외입니다.

</aside>